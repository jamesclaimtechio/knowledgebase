# AI Assistant Rules - Knowledge Base Template

This template is designed for AI-assisted client setup. Follow these rules to help clients customize their documentation site.

## Core Principles

1. **Guide, Don't Guess** - Confirm client preferences before changes
2. **Test Before Deploy** - Run `npm run dev` after major changes
3. **Explain Decisions** - Help clients understand your choices
4. **Progressive Setup** - Follow the workflow below

---

## CLIENT SETUP WORKFLOW

### Phase 1: Gather Information
Before editing, ask about:
- Product/service name and type of docs (API, help center, guides)
- Logo files ready? Preferred colors?
- Deployment target? (Vercel, GitHub Pages, other)

### Phase 2: Site Configuration (`config/site.ts`)
1. Update name, title, description, keywords
2. Set homeSlug to landing page
3. Configure sidebar categories to match content structure

### Phase 3: Branding
1. Client adds logos to /public folder
2. Update logo paths in config/site.ts
3. Customize colors in app/globals.css

### Phase 4: Content
1. Delete example markdown files in /content
2. Add client's docs with frontmatter (title, description, slug, order)
3. Test each page renders correctly

### Phase 5: Deploy
- Vercel: Push to GitHub, connect Vercel, done
- GitHub Pages: Set output:'export' in next.config.ts, enable in repo settings
- Static: npm run build, deploy /out folder

---

## TECHNICAL REFERENCE

Next.js 16+ documentation site with markdown content, dark mode, and centralized design system.

## Project Structure

- app/ - Next.js App Router (globals.css has design tokens, [slug]/page.tsx for docs)
- components/ - React components (Sidebar, DocContent, ThemeToggle, SearchDialog)
- config/site.ts - Site identity, navigation, sidebar categories
- content/ - Markdown docs (XX-slug.md naming, frontmatter required)
- lib/ - Utilities (docs.ts, markdown.ts, search.ts)
- public/ - Static assets (logos, icons)

## Quick Customization

### Site Identity (config/site.ts)
- name, title, description, keywords - SEO and branding
- logo.light - Logo for light mode (e.g., dark text logo)
- logo.dark - Logo for dark mode (e.g., light text logo)
- navigation.homeSlug - Default landing page
- sidebar.categories - Doc groupings by order ranges

### Design Tokens (app/globals.css)
All styling via CSS variables in :root and .dark blocks:
- Colors: --color-bg, --color-text, --color-primary, --color-border
- Typography: --text-sm, --text-base, --text-lg, etc.
- Spacing: --space-1 through --space-16
- Layout: --sidebar-width, --toc-width, --content-max-width

## Adding Documentation

Frontmatter (required):
---
title: Page Title
description: SEO description
slug: url-slug
order: 1
---

Docs grouped by order value. Configure ranges in config/site.ts sidebar.categories.

## Component Patterns

Server Components (default): Sidebar.tsx, DocContent.tsx
Client Components ("use client"): ThemeToggle.tsx, SearchDialog.tsx, MobileNav.tsx

Use CSS variables: className="bg-[var(--color-bg-subtle)] text-[var(--color-text)]"

## Dark Mode

Uses .dark class on html. All tokens have dark overrides. Never hardcode colors.

Logo switching: Use separate logo.light and logo.dark files. Components show/hide via dark:hidden and hidden dark:block classes.

## Code Blocks

rehype-pretty-code with dual themes (github-light/github-dark). Configure in lib/markdown.ts.

## Deployment

Vercel: Connect GitHub, auto-deploys.
Static: Set output: 'export' in next.config.ts, deploy out/ folder.

---

## TROUBLESHOOTING

### Common Issues

**Logo not showing:**
- Verify file exists in /public
- Check path in config/site.ts starts with /

**Page not in sidebar:**
- Check order field is within a category range
- Restart dev server

**Build errors:**
- Run: rm -rf node_modules .next && npm install

**Dark mode colors wrong:**
- Update BOTH :root and .dark sections in globals.css

---

## VALIDATION CHECKLIST

Before setup is complete:
- [ ] config/site.ts updated with client info
- [ ] Logo files in /public, paths configured
- [ ] At least one real doc page exists
- [ ] npm run build completes without errors
- [ ] Site accessible locally and deployed

---

## KEY FILES

| File | Purpose |
|------|---------|
| config/site.ts | Site identity, nav, categories |
| app/globals.css | Colors, fonts, spacing |
| content/*.md | Documentation pages |
| next.config.ts | Build/deploy config |

---

## Tech Stack

Next.js 16+, Tailwind CSS 4, @tailwindcss/typography, unified, remark-gfm, rehype-pretty-code, Fuse.js, next-themes
